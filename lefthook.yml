pre-commit:
  piped: true
  jobs:
    - name: block-settings-json
      priority: 0
      glob: ".claude/settings.json"
      run: ./.claude/git/block-settings-json.sh
    - name: sync-settings
      priority: 1
      glob: ".claude/__settings.jsonc"
      run: |
        ./.claude/scripts/settings-sync.sh
        git add .claude/settings.json
    - name: validate-marketplace
      glob:
        - ".claude-plugin/*.json"
        - "*/.claude-plugin/*.json"
      run: ./scripts/validate-marketplace.ts
    - name: validate-frontmatter
      glob:
        - "*/commands/*.md"
        - "*/skills/*.md"
        - "*/agents/*.md"
        - "*/hooks/*.md"
        - ".claude/commands/*.md"
        - ".claude/skills/*.md"
      run: bun ./scripts/validate-frontmatter.ts

commit-msg:
  jobs:
    - name: block-ai-signatures
      run: ./.claude/git/block-ai-signatures.sh {1}

post-merge:
  jobs:
    - name: submodule-update
      run: ./.claude/git/submodule-update.sh
